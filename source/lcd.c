/*!
    \file  lcd.c
    \brief lcd driver
*/

/*
    Copyright (C) 2018 BYD

    2018-05-10, V1.0.0, firmware for mcu02
*/
#include "lcd128x64.h"

//  
//	0x80,0x40,0x70,0xCF,0x48,0x48,0x00,0xE2,//Ëø
//	0x00,0x02,0x02,0x7F,0x22,0x92,0x80,0x4F,
//	0x2C,0x20,0xBF,0x20,0x28,0xF6,0x20,0x00,
//	0x40,0x20,0x1F,0x20,0x20,0x4F,0x80,0x00,
//	
//	0x00,0x02,0xF2,0x42,0x42,0x42,0x42,0x42,//ÒÑ
//	0x00,0x00,0x3F,0x40,0x40,0x40,0x40,0x40,
//	0x42,0x42,0x42,0xFF,0x02,0x00,0x00,0x00,
//	0x40,0x40,0x40,0x40,0x40,0x78,0x00,0x00,
//	
//	0x10,0x10,0x10,0xFF,0x90,0x50,0x08,0x08,//´ò
//	0x02,0x42,0x81,0x7F,0x00,0x00,0x00,0x00,
//	0x08,0x08,0xF8,0x08,0x08,0x0C,0x08,0x00,
//	0x40,0x80,0x7F,0x00,0x00,0x00,0x00,0x00,

//	0x80,0x82,0x82,0x82,0xFE,0x82,0x82,0x82,//¿ª
//	0x00,0x80,0x40,0x30,0x0F,0x00,0x00,0x00,
//	0x82,0x82,0xFE,0x82,0x83,0xC2,0x80,0x00,
//	0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,
//
//
//	

code uint8_t F8X16_up[]=
{
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// 0   _up
  0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,//!1   _up
  0x00,0x10,0x0C,0x06,0x10,0x0C,0x06,0x00,//"2   _up
  0x40,0xC0,0x78,0x40,0xC0,0x78,0x40,0x00,//#3   _up
  0x00,0x70,0x88,0xFC,0x08,0x30,0x00,0x00,//$4   _up
  0xF0,0x08,0xF0,0x00,0xE0,0x18,0x00,0x00,//%5   _up
  0x00,0xF0,0x08,0x88,0x70,0x00,0x00,0x00,//&6   _up
  0x10,0x16,0x0E,0x00,0x00,0x00,0x00,0x00,//'7   _up
  0x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,//(8   _up
  0x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,//)9   _up
  0x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,//*10  _up
  0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,//+11  _up
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//,12  _up
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//-13  _up
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//.14  _up
  0x00,0x00,0x00,0x00,0x80,0x60,0x18,0x04,///15  _up
  0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,//016	 _up
  0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,//117  _up
  0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,//218  _up
  0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,//319  _up
  0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,//420  _up
  0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,//521  _up
  0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,//622  _up
  0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,//723  _up
  0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,//824  _up
  0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,//925  _up
  0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,//:26  _up
  0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,//;27  _up
  0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,//<28  _up
  0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,//=29  _up
  0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,//>30  _up
  0x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,//?31  _up
  0xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,//@32  _up
  0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,//A33  _up
  0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,//B34  _up
  0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,//C35  _up
  0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,//D36  _up
  0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,//E37  _up
  0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,//F38  _up
  0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,//G39  _up
  0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,//H40  _up
  0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,//I41  _up
  0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,//J42  _up
  0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,//K43  _up
  0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,//L44  _up
  0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,//M45  _up
  0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,//N46  _up
  0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,//O47  _up
  0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,//P48  _up
  0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,//Q49  _up
  0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,//R50  _up
  0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,//S51  _up
  0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,//T52  _up
  0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,//U53  _up
  0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,//V54  _up
  0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,//W55  _up
  0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,//X56  _up
  0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,//Y57  _up
  0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,//Z58  _up
  0x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,//[59  _up
  0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,//\60  _up
  0x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,//]61  _up
  0x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,//^62  _up
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//_63  _up
  0x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,//`64  _up
  0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,//a65  _up
  0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,//b66  _up
  0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,//c67  _up
  0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,//d68  _up
  0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,//e69  _up
  0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,//f70  _up
  0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,//g71  _up
  0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,//h72  _up
  0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,//i73  _up
  0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,//j74  _up
  0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,//k75  _up
  0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,//l76  _up
  0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,//m77  _up
  0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,//n78  _up
  0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,//o79  _up
  0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,//p80  _up
  0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,//q81  _up
  0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,//r82  _up
  0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,//s83  _up
  0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,//t84  _up
  0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,//byte5_up
  0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,//v86  _up
  0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,//w87  _up
  0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,//x88  _up
  0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,//y89  _up
  0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,//z90  _up
  0x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,//{91  _up
  0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,//|92  _up
  0x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,//}93  _up
  0x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,//~94  _up

};

code uint8_t F8X16_down[] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// 0   _down  
0x00,0x00,0x00,0x33,0x30,0x00,0x00,0x00,//!1   _down  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//"2   _down  
0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00,//#3   _down  
0x00,0x18,0x20,0xFF,0x21,0x1E,0x00,0x00,//$4   _down  
0x00,0x21,0x1C,0x03,0x1E,0x21,0x1E,0x00,//%5   _down  
0x1E,0x21,0x23,0x24,0x19,0x27,0x21,0x10,//&6   _down  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//'7   _down  
0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00,//(8   _down  
0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00,//)9   _down  
0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00,//*10  _down  
0x01,0x01,0x01,0x1F,0x01,0x01,0x01,0x00,//+11  _down  
0x80,0xB0,0x70,0x00,0x00,0x00,0x00,0x00,//,12  _down  
0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,//-13  _down  
0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,//.14  _down  
0x00,0x60,0x18,0x06,0x01,0x00,0x00,0x00,///15  _down  
0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,//016	down_ 
0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//117  _down  
0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,//218  _down  
0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,//319  _down  
0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,//420  _down  
0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00,//521  _down  
0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00,//622  _down  
0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,//723  _down  
0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00,//824  _down  
0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00,//925  _down  
0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,//:26  _down  
0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00,//;27  _down  
0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00,//<28  _down  
0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,//=29  _down  
0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00,//>30  _down  
0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00,//?31  _down  
0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00,//@32  _down  
0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20,//A33  _down  
0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00,//B34  _down  
0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00,//C35  _down  
0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00,//D36  _down  
0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00,//E37  _down  
0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00,//F38  _down  
0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00,//G39  _down  
0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20,//H40  _down  
0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//I41  _down  
0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00,//J42  _down  
0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00,//K43  _down  
0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00,//L44  _down  
0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00,//M45  _down  
0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00,//N46  _down  
0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00,//O47  _down  
0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00,//P48  _down  
0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00,//Q49  _down  
0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20,//R50  _down  
0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00,//S51  _down  
0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,//T52  _down  
0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,//U53  _down  
0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00,//V54  _down  
0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00,//W55  _down  
0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20,//X56  _down  
0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,//Y57  _down  
0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00,//Z58  _down  
0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00,//[59  _down  
0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00,//\60  _down  
0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00,//]61  _down  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//^62  _down  
0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,//_63  _down  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//`64  _down  
0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20,//a65  _down  
0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00,//b66  _down  
0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00,//c67  _down  
0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20,//d68  _down  
0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00,//e69  _down  
0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//f70  _down  
0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00,//g71  _down  
0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,//h72  _down  
0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//i73  _down  
0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,//j74  _down  
0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00,//k75  _down  
0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//l76  _down  
0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F,//m77  _down  
0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,//n78  _down  
0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,//o79  _down  
0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00,//p80  _down  
0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80,//q81  _down  
0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00,//r82  _down  
0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00,//s83  _down  
0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00,//t84  _down  
0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20,//byte5_down  
0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00,//v86  _down  
0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00,//w87  _down  
0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00,//x88  _down  
0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00,//y89  _down  
0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00,//z90  _down  
0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40,//{91  _down  
0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,//|92  _down  
0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00,//}93  _down  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//~94  _down  
};

void LCD_WrDat(uint8_t dat)
{
	gpio_bit_set(LCD_CMD_DATA_PORT,LCD_CMD_DATA_PIN);
	SPI1_CS_L();
	spi1_sendbyte(dat);
	SPI1_CS_H();
}
void LCD_WrCmd(uint8_t cmd)
{
	gpio_bit_reset(LCD_CMD_DATA_PORT,LCD_CMD_DATA_PIN);
	SPI1_CS_L();
	spi1_sendbyte(cmd);
	SPI1_CS_H();
}

void LCD_Set_Pos(uint8_t x, uint8_t y)
{ 
  LCD_WrCmd(0xb0+y);
  LCD_WrCmd(((x&0xf0)>>4)|0x10);
  LCD_WrCmd((x&0x0f)|0x01); 
} 

void LCD_Fill(uint8_t bmp_data)
{
	uint8_t y,i;
	for(i=0;i<128;i++){
		lcd_data_up[i] = 0x00;
		lcd_data_down[i] = 0x00;
	  }
	for(y=0;y<8;y++)
	{
		LCD_WrCmd(0xb0+y);
		LCD_WrCmd(0x01);
		LCD_WrCmd(0x10);
		gpio_bit_set(LCD_CMD_DATA_PORT,LCD_CMD_DATA_PIN);
		spi_high_speed_comm((uint16_t)&lcd_data_up[0],0x00,128,HALF_DUPLEX_TX);
		wait_spi_high_comm_end();
//		for(x=0;x<X_WIDTH;x++)
//			LCD_WrDat(bmp_data);
	}
}

void lcd_init()
{
	uint8_t delay_timer = 0;
	gpio_init(LCD_CMD_DATA_PORT,LCD_CMD_DATA_PIN,GPIO_MODE_OUT);
	gpio_init(LCD_RST_PORT,LCD_RST_PIN,GPIO_MODE_OUT);
	SPI1_CS_H();
	gpio_bit_reset(LCD_RST_PORT,LCD_RST_PIN);
	while(delay_timer < 10){
		if(timer_10ms){
			timer_10ms = 0;
			delay_timer ++;
		}
	}
	gpio_bit_set(LCD_RST_PORT,LCD_RST_PIN);
	LCD_WrCmd(0xaf);	//0xaf  LCD On
	LCD_WrCmd(0x2f);	//0x2f  ????????  	
	LCD_WrCmd(0x81);	//0x81  ??????(????)
	LCD_WrCmd(0x10);	//????0x0000~0x003f  	
	LCD_WrCmd(0x24);	//0x24  V5??????????
	LCD_WrCmd(0xa2);	//0xa2 5V,0xa1 3V3     LCD????   	
	LCD_WrCmd(0xc0);	//0xc8 ??,0xc0 ??  Com ??????
	LCD_WrCmd(0xa1);	//0xa0 ??,0xa1 ??  Segment????
	LCD_WrCmd(0xa4);	//0xa4  ????/????
	LCD_WrCmd(0xa6);	//0xa6  ??????????   	
	LCD_WrCmd(0xac);	//0xac  ???????
	LCD_WrCmd(0x00);	//????    	
	LCD_WrCmd(0x40+32);	//0x40+32	?????????RAM
	LCD_Fill(0x00);  //????
	LCD_Set_Pos(0,0); 
}
extern uint8_t xdata display_line;
extern uint8_t xdata timer2_hour,timer2_min,timer2_sec;
extern uint8_t xdata flash_flag;
extern uint8_t xdata timer3_hour,timer3_min,timer3_sec;
void set_timer_disp(uint8_t *timer_dis,uint8_t timer_h,uint8_t timer_m,uint8_t timer_s);
void set_rfid_uid_disp(uint8_t *timer_dis,uint8_t *uid,uint8_t uid_byte_num);
extern xdata rfid_uid[7];
extern uint8_t rfid_uid_byte;
extern bool rfid_state;
void Draw_LQLogo(void)
{ 	
	uint16_t i=0,j=0,k = 0;
	uint8_t y = 0;  
//	uint8_t disptimer[4][8] = {{'t','i','m','e','r','2',':',' '},
//								{0},
//								{'t','i','m','e','r','3',':',' '}};
//	uint8_t *disp_p = &disptimer[0][0];								
//	set_timer_disp(&disptimer[1][0],timer2_hour,timer2_min,timer2_sec);
//	set_timer_disp(&disptimer[3][0],timer3_hour,timer3_min,timer3_sec);
	uint8_t disptimer[2][16] = {{'r','f','i','d',' ','u','i','d',':'},
								{0}
								};
	uint8_t *disp_p = &disptimer[0][0];	
	if(rfid_state){
		set_rfid_uid_disp(&disptimer[1][0],&rfid_uid[0],rfid_uid_byte);
	}else{
		disptimer[1][0] = 'e';disptimer[1][1] = 'r';
		disptimer[1][2] = 'r';disptimer[1][3] = 'o';
		disptimer[1][4] = 'r';
	}
//	set_timer_disp(&disptimer[3][0],timer3_hour,timer3_min,timer3_sec);
	
	for(y=0;y<4;y+=2){
		for(j=0,k=0;j<16;j++){
			for(i=0;i<8;i++){
				lcd_data_up[k] = F8X16_up[8*(*disp_p -' ')+i];
				lcd_data_down[k] = F8X16_down[8*(*disp_p -' ')+i];
				k ++;
			}
			disp_p ++;
		}
		LCD_Set_Pos(2,y);
		gpio_bit_set(LCD_CMD_DATA_PORT,LCD_CMD_DATA_PIN);
		spi_high_speed_comm((uint16_t)&lcd_data_up[0],0x00,128,HALF_DUPLEX_TX);
		wait_spi_high_comm_end();
		
		LCD_Set_Pos(2,y+1);
		gpio_bit_set(LCD_CMD_DATA_PORT,LCD_CMD_DATA_PIN);
		spi_high_speed_comm((uint16_t)&lcd_data_down[0],0x00,128,HALF_DUPLEX_TX);
		wait_spi_high_comm_end();
	}
	
}

void set_timer_disp(uint8_t *timer_dis,uint8_t timer_h,uint8_t timer_m,uint8_t timer_s)
{
	timer_dis[0] = (timer_h / 10) + '0';
	timer_dis[1] = (timer_h % 10) + '0';
	if(flash_flag)
	{
		timer_dis[2] = ':';timer_dis[5] = ':';
	}
	else
	{
		timer_dis[2] = ' ';timer_dis[5] = ' ';
	}
	timer_dis[3] = (timer_m / 10) + '0';
	timer_dis[4] = (timer_m % 10) + '0';
	timer_dis[6] = (timer_s / 10) + '0';
	timer_dis[7] = (timer_s % 10) + '0';
}

void set_rfid_uid_disp(uint8_t *timer_dis,uint8_t *uid,uint8_t uid_byte_num)
{
	uint8_t i,j;
	uint8_t temp;
	timer_dis[0] = '0';
	timer_dis[1] = 'x';
	for(i=0,j=2;i<uid_byte_num;i++){
		temp = (uid[i] >> 4);
		if(temp >= 10){
			timer_dis[j] = (temp - 10) + 'a';
		}else{
			timer_dis[j] = temp + '0';
		}
		temp = (uid[i] & 0x0f);
		if(temp >= 10){
			timer_dis[j + 1] = (temp - 10) + 'a';
		}else{
			timer_dis[j + 1] = temp + '0';
		}
		j += 2;
	}
}